<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El API Gateway Pattern | Arquitectura de Software</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <div class="container">
        <main class="main-content">
            <section id="section-api-gateway">
                <h1>‚õ©Ô∏è 1.7 The API Gateway Pattern</h1>
                <p><strong>Centralizando Seguridad y Puntos de Entrada en Microservicios</strong></p>

                <h2>1Ô∏è‚É£ El Problema Real Que Estamos Resolviendo</h2>

                <p>Cuando pasas de monolito a microservicios ocurre esto:</p>

                <pre><code>Frontend ‚Üí Payments
Frontend ‚Üí Accounts
Frontend ‚Üí Orders
Frontend ‚Üí Notifications
Frontend ‚Üí Inventory
...</code></pre>

                <p><strong>Problemas reales:</strong></p>

                <ul>
                    <li>üîì Cada servicio expuesto a internet</li>
                    <li>üîÅ Repetici√≥n de seguridad en todos lados</li>
                    <li>üî• Demasiados puntos de fallo</li>
                    <li>üì¶ Acoplamiento fuerte entre frontend y servicios</li>
                    <li>üö® Superficie de ataque enorme</li>
                </ul>

                <p>En sistemas grandes esto es insostenible.</p>

                <h2>2Ô∏è‚É£ La Analog√≠a Correcta: La Ciudad Amurallada</h2>

                <p>Imagina:</p>

                <ul>
                    <li>üß± VPC = murallas</li>
                    <li>üè† Microservicios = edificios dentro</li>
                    <li>üö™ API Gateway = √∫nica puerta</li>
                </ul>

                <p><strong>Nadie entra directamente a un edificio.<br>
                Todos pasan por la puerta.</strong></p>

                <h2>3Ô∏è‚É£ ¬øQu√© Es Realmente un API Gateway?</h2>

                <p>Un API Gateway es un reverse proxy especializado en tr√°fico API que act√∫a como single entry point.</p>

                <p>No es:</p>

                <ul>
                    <li>Solo un router</li>
                    <li>Solo un load balancer</li>
                    <li>Solo seguridad</li>
                </ul>

                <p><strong>Es un controlador central de tr√°fico API.</strong></p>

                <h2>4Ô∏è‚É£ Responsabilidades Reales de un API Gateway</h2>

                <h3>üîê 1. TLS Termination</h3>

                <ul>
                    <li>Maneja HTTPS</li>
                    <li>Hace el TLS handshake</li>
                    <li>Descarga esa responsabilidad de los microservicios</li>
                </ul>

                <h3>üõ° 2. Authentication</h3>

                <ul>
                    <li>JWT validation</li>
                    <li>OAuth 2.0</li>
                    <li>API Keys</li>
                </ul>

                <h3>üß© 3. Cross-Cutting Concerns</h3>

                <ul>
                    <li>CORS</li>
                    <li>HTTP caching</li>
                    <li>Header manipulation</li>
                    <li>Rate limiting</li>
                    <li>IP filtering</li>
                    <li>Logging</li>
                    <li>Metrics</li>
                    <li>Request transformation</li>
                </ul>

                <h3>üîÄ 4. Routing</h3>

                <pre><code>/payments ‚Üí payments-service
/accounts ‚Üí accounts-service
/orders   ‚Üí orders-service</code></pre>

                <p>El frontend solo conoce:</p>

                <pre><code>api.mycompany.com</code></pre>

                <h2>5Ô∏è‚É£ Arquitectura Antes y Despu√©s</h2>

                <h3>‚ùå Sin API Gateway</h3>

                <pre><code>Internet
   ‚Üì
Payments
Accounts
Orders
Inventory</code></pre>

                <p>Demasiados puntos expuestos.</p>

                <h3>‚úÖ Con API Gateway</h3>

                <pre><code>Internet
   ‚Üì
API Gateway
   ‚Üì
VPC Privada
   ‚Üì
Microservicios</code></pre>

                <p>Ahora:</p>

                <ul>
                    <li>Solo un endpoint p√∫blico</li>
                    <li>Servicios privados</li>
                    <li>Menor superficie de ataque</li>
                </ul>

                <h2>6Ô∏è‚É£ Integraci√≥n con VPC (Arquitectura Cloud Real)</h2>

                <p>En AWS:</p>

                <pre><code>Internet
   ‚Üì
AWS API Gateway (p√∫blico)
   ‚Üì
VPC Privada
   ‚Üì
Lambda / ECS / EC2</code></pre>

                <p>Incluso puedes usar HTTP interno dentro de la VPC si est√° completamente aislada.</p>

                <h2>7Ô∏è‚É£ Beneficios Clave (Modo Entrevista Senior)</h2>

                <h3>‚úÖ Centralizaci√≥n de Seguridad</h3>

                <p>Una sola configuraci√≥n.<br>
                Un solo lugar para TLS y auth.</p>

                <h3>‚úÖ Reducci√≥n de Duplicaci√≥n</h3>

                <p>No repites CORS o validaciones en 15 servicios.</p>

                <h3>‚úÖ Abstracci√≥n</h3>

                <p>Puedes cambiar:</p>

                <ul>
                    <li>Tecnolog√≠a interna</li>
                    <li>Versiones</li>
                    <li>Infraestructura</li>
                </ul>

                <p>Sin romper el frontend.</p>

                <h3>‚úÖ Escalabilidad</h3>

                <p>API Gateway escala autom√°ticamente.<br>
                AWS ofrece 1 mill√≥n de requests gratis.<br>
                Maneja spikes de tr√°fico mejor que tus servicios.</p>

                <h2>8Ô∏è‚É£ El Gran Riesgo: Single Point of Failure</h2>

                <p>Si el gateway cae, todo lo que est√° detr√°s es inaccesible.</p>

                <p>Es cr√≠tico.<br>
                Es infraestructura sensible.<br>
                No lo toques frecuentemente.</p>

                <p><strong>Regla senior:</strong></p>

                <p><strong>Never couple business logic to your gateway.</strong></p>

                <h2>9Ô∏è‚É£ ERROR Com√∫n: Agregar L√≥gica de Negocio</h2>

                <p>Muchos dicen:</p>

                <p>"El gateway puede agregar respuestas de varios servicios."</p>

                <p><strong>S√≠. Pero no deber√≠as.</strong></p>

                <p><strong>¬øPor qu√©?</strong></p>

                <p>Porque:</p>

                <ul>
                    <li>Introduces l√≥gica de negocio</li>
                    <li>Aumentas acoplamiento</li>
                    <li>Dificultas despliegues</li>
                    <li>Incrementas riesgo en el punto m√°s cr√≠tico</li>
                </ul>

                <h2>üîü API Gateway vs BFF (Backend For Frontend)</h2>

                <p>Esto es clave para entrevistas.</p>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Componente</th>
                        <th>Responsabilidad</th>
                        <th>L√≥gica de Negocio</th>
                    </tr>
                    <tr>
                        <td><strong>API Gateway</strong></td>
                        <td>Seguridad, Routing, Rate limiting, CORS, TLS, Logging</td>
                        <td>NO</td>
                    </tr>
                    <tr>
                        <td><strong>BFF</strong></td>
                        <td>Agregar datos, Llamar m√∫ltiples servicios, Transformar respuestas</td>
                        <td>S√ç</td>
                    </tr>
                </table>

                <p><strong>Arquitectura avanzada:</strong></p>

                <pre><code>Frontend
   ‚Üì
API Gateway
   ‚Üì
BFF (Backend For Frontend)
   ‚Üì
Microservicios</code></pre>

                <p>El BFF es donde va la agregaci√≥n.<br>
                No en el gateway.</p>

                <h2>1Ô∏è‚É£1Ô∏è‚É£ API Gateway y Reverse Proxy</h2>

                <p>Un API Gateway es un:</p>

                <p><strong>Reverse Proxy Especializado</strong></p>

                <p>Otros reverse proxies:</p>

                <ul>
                    <li>NGINX</li>
                    <li>Apache</li>
                    <li>Load Balancer</li>
                </ul>

                <p><strong>Opuesto:</strong></p>

                <ul>
                    <li>Forward Proxy (ejemplo: VPN) - act√∫a en nombre del cliente</li>
                </ul>

                <h2>1Ô∏è‚É£2Ô∏è‚É£ Implementaciones Reales</h2>

                <h3>‚òÅÔ∏è Cloud-Managed</h3>

                <ul>
                    <li>AWS API Gateway</li>
                    <li>Azure API Management</li>
                    <li>Google Cloud API Gateway</li>
                </ul>

                <p><strong>Ventajas:</strong></p>

                <ul>
                    <li>Escalabilidad autom√°tica</li>
                    <li>Alta disponibilidad</li>
                    <li>Menos mantenimiento</li>
                </ul>

                <h3>üîß Self-Managed</h3>

                <ul>
                    <li>NGINX</li>
                    <li>Kong</li>
                    <li>Traefik</li>
                    <li>Apache</li>
                </ul>

                <p><strong>Requiere:</strong></p>

                <ul>
                    <li>Configuraci√≥n manual</li>
                    <li>Mantenimiento</li>
                    <li>Escalado manual</li>
                </ul>

                <h2>1Ô∏è‚É£3Ô∏è‚É£ Cu√°ndo Usar un API Gateway</h2>

                <h3>‚úÖ √ösalo cuando:</h3>

                <ul>
                    <li>Tienes m√∫ltiples microservicios</li>
                    <li>Necesitas centralizar seguridad</li>
                    <li>Quieres aislar servicios en VPC</li>
                    <li>Necesitas rate limiting</li>
                    <li>Expones APIs p√∫blicas</li>
                </ul>

                <h3>‚ö†Ô∏è No es tan necesario si:</h3>

                <ul>
                    <li>Tienes monolito simple</li>
                    <li>Proyecto peque√±o sin crecimiento esperado</li>
                </ul>

                <h2>1Ô∏è‚É£4Ô∏è‚É£ Preguntas T√≠picas de Entrevista</h2>

                <h3>‚ùì ¬øQu√© es un API Gateway?</h3>

                <p><strong>Respuesta:</strong></p>

                <p>"Un reverse proxy centralizado que act√∫a como single entry point a una arquitectura de microservicios, manejando cross-cutting concerns como autenticaci√≥n, TLS termination, routing, caching y rate limiting."</p>

                <h3>‚ùì ¬øCu√°les son sus desventajas?</h3>

                <p><strong>Respuesta:</strong></p>

                <p>"Introduce un single point of failure y puede volverse un cuello de botella si est√° sobrecargado o se usa mal."</p>

                <h3>‚ùì ¬øDeber√≠a contener l√≥gica de negocio?</h3>

                <p><strong>Respuesta:</strong></p>

                <p>"Idealmente no. La l√≥gica de negocio debe residir en los servicios backend o en un BFF para evitar acoplamiento fuerte y riesgos de despliegue."</p>

                <h2>1Ô∏è‚É£5Ô∏è‚É£ Mental Model Final</h2>

                <p><strong>Sin gateway:</strong><br>
                Microservicios expuestos, duplicaci√≥n, caos.</p>

                <p><strong>Con gateway:</strong><br>
                Ciudad amurallada con una puerta controlada.</p>

                <p><strong>Con gateway mal usado:</strong><br>
                Guardia de la puerta tomando decisiones estrat√©gicas del reino.</p>

                <h2>üéØ Resumen Ultra Ejecutivo</h2>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Concepto</th>
                        <th>Respuesta</th>
                    </tr>
                    <tr>
                        <td>¬øQu√© es?</td>
                        <td>Single entry point</td>
                    </tr>
                    <tr>
                        <td>Beneficio principal</td>
                        <td>Seguridad centralizada</td>
                    </tr>
                    <tr>
                        <td>Funciones</td>
                        <td>TLS, Auth, Routing, CORS</td>
                    </tr>
                    <tr>
                        <td>Riesgo</td>
                        <td>Single point of failure</td>
                    </tr>
                    <tr>
                        <td>No hacer</td>
                        <td>Agregar l√≥gica de negocio</td>
                    </tr>
                    <tr>
                        <td>Lugar correcto para agregaci√≥n</td>
                        <td>Capa BFF</td>
                    </tr>
                </table>

                <h2>üéØ Puntos Clave</h2>

                <ul>
                    <li>‚úî API Gateway = Single entry point a microservicios</li>
                    <li>‚úî Centraliza seguridad, CORS, TLS, autenticaci√≥n, rate limiting</li>
                    <li>‚úî A√≠sla servicios internos en VPC privada</li>
                    <li>‚úî Single point of failure - mantenlo simple y estable</li>
                    <li>‚úî Nunca agregues l√≥gica de negocio en el gateway</li>
                    <li>‚úî Usa capa BFF para agregaci√≥n y transformaci√≥n de datos</li>
                    <li>‚úî Cloud-managed (AWS, Azure, GCP) es usualmente mejor que self-hosted</li>
                    <li>‚úî Esencial para APIs p√∫blicas y arquitecturas multi-servicio</li>
                    <li>‚úî API Gateway + BFF + Microservicios = arquitectura completa</li>
                    <li>‚úî Reduce superficie de ataque dram√°ticamente</li>
                </ul>

                <h2>üìö Recursos</h2>

                <ul>
                    <li><a href="https://chatgpt.com/g/g-p-69925f6597e88191b8bcb93447c5bb78-dragos/c/699889c6-b640-838d-8a7c-b54e13b929d4" target="_blank">The API Gateway Pattern - Dragos</a></li>
                </ul>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="window.location.href='../index.html'">‚Üê Volver Atr√°s</button>
                    <button class="btn btn-primary" onclick="window.location.href='../../index.html'">Volver al Inicio ‚Üí</button>
                </div>
            </section>
        </main>
    </div>

    <script src="../../assets/js/app.js"></script>
</body>
</html>
