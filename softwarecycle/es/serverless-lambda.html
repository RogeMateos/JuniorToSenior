<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serverless con AWS Lambda | Ciclo de Software</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <div class="container">
        <aside id="sidebar" class="sidebar"></aside>
        <main class="main-content">
            <section id="section-serverless-lambda">
                <h1>‚ö°Ô∏è 3.0 Serverless con AWS Lambda</h1>
                <p><strong>Gu√≠a Completa para Full-Stack Developers</strong></p>

                <h2>1Ô∏è‚É£ Primero: ¬øQu√© significa realmente "Serverless"?</h2>

                <p><strong>‚ùå No significa que no haya servidores.</strong><br>
                <strong>‚úÖ Significa que t√∫ no los gestionas.</strong></p>

                <p><strong>Modelo tradicional:</strong></p>

                <ul>
                    <li>Creas un servidor (EC2, VPS‚Ä¶)</li>
                    <li>Instalas Node</li>
                    <li>Configuras Nginx</li>
                    <li>Haces deploy</li>
                    <li>Gestionas escalado</li>
                    <li>Parcheas seguridad</li>
                    <li>Monitorizas CPU/RAM</li>
                </ul>

                <p><strong>Modelo Serverless:</strong></p>

                <ul>
                    <li>Subes tu c√≥digo</li>
                    <li>AWS crea el entorno de ejecuci√≥n</li>
                    <li>AWS escala autom√°ticamente</li>
                    <li>Pagas solo por uso</li>
                </ul>

                <h3>üí° Modelo mental correcto</h3>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Fase</th>
                        <th>Qu√© pasa</th>
                    </tr>
                    <tr>
                        <td>Build</td>
                        <td>Empaquetas tu c√≥digo + dependencias</td>
                    </tr>
                    <tr>
                        <td>Cold Start</td>
                        <td>AWS crea entorno y carga tu funci√≥n (a veces)</td>
                    </tr>
                    <tr>
                        <td>Invocation</td>
                        <td>Se ejecuta el handler</td>
                    </tr>
                    <tr>
                        <td>Warm Reuse</td>
                        <td>AWS puede reutilizar el entorno</td>
                    </tr>
                </table>

                <p>‚ö†Ô∏è <strong>Importante:</strong> npm install no ocurre en cada request. Ocurre en el build.</p>

                <h2>2Ô∏è‚É£ ¬øCu√°ndo usar Lambda? (Decisi√≥n de arquitecto)</h2>

                <h3>Lambda es excelente para:</h3>

                <ul>
                    <li>‚úÖ APIs con tr√°fico irregular</li>
                    <li>‚úÖ MVPs / startups</li>
                    <li>‚úÖ Procesos as√≠ncronos</li>
                    <li>‚úÖ Arquitecturas event-driven</li>
                    <li>‚úÖ Tareas cortas y stateless</li>
                </ul>

                <h3>NO es ideal para:</h3>

                <ul>
                    <li>‚ùå Procesos largos (&gt;15 minutos)</li>
                    <li>‚ùå WebSockets persistentes complejos</li>
                    <li>‚ùå Apps con heavy state en memoria</li>
                    <li>‚ùå Workloads muy predecibles (a veces EC2 es m√°s barato)</li>
                </ul>

                <h2>3Ô∏è‚É£ Arquitectura t√≠pica real</h2>

                <p>Modelo cl√°sico profesional:</p>

                <pre><code>Cliente
   ‚Üì
API Gateway
   ‚Üì
Lambda
   ‚Üì
RDS Proxy
   ‚Üì
RDS (Base de datos)</code></pre>

                <h3>¬øPor qu√© cada pieza?</h3>

                <p><strong>üîπ API Gateway</strong></p>

                <ul>
                    <li>Expone endpoint HTTP</li>
                    <li>Rate limiting</li>
                    <li>Auth</li>
                    <li>Routing</li>
                </ul>

                <p><strong>üîπ Lambda</strong></p>

                <ul>
                    <li>Ejecuta tu l√≥gica</li>
                    <li>Escala autom√°ticamente</li>
                </ul>

                <p><strong>üîπ RDS Proxy</strong></p>

                <p><strong>Problema:</strong> Cada Lambda concurrente abre conexiones nuevas a la DB.<br>
                Si hay 1000 requests:<br>
                ‚Üí 1000 conexiones<br>
                ‚Üí tu DB muere.</p>

                <p><strong>Soluci√≥n:</strong> RDS Proxy hace connection pooling.</p>

                <h2>4Ô∏è‚É£ Tu primera Lambda HTTP (Node.js)</h2>

                <p>Ejemplo m√≠nimo real:</p>

                <pre><code>export const handler = async (event, context) => {
  console.log("Request ID:", context.awsRequestId);

  return {
    statusCode: 200,
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      message: "Hello from Lambda",
      requestId: context.awsRequestId,
    }),
  };
};</code></pre>

                <h3>¬øQu√© es event?</h3>

                <p>Contiene:</p>

                <ul>
                    <li>path</li>
                    <li>headers</li>
                    <li>query params</li>
                    <li>body</li>
                </ul>

                <h3>¬øQu√© es context?</h3>

                <p>Contiene:</p>

                <ul>
                    <li>request id</li>
                    <li>deadline</li>
                    <li>metadata ejecuci√≥n</li>
                </ul>

                <h2>5Ô∏è‚É£ Cost Model (muy importante entenderlo)</h2>

                <p>Pagas por:</p>

                <ul>
                    <li>N√∫mero de invocaciones</li>
                    <li>Tiempo de ejecuci√≥n</li>
                    <li>Memoria asignada (GB-seconds)</li>
                </ul>

                <p><strong>M√°s memoria = m√°s CPU.</strong></p>

                <p>Si tu funci√≥n tarda mucho:</p>

                <p>‚Üí sube memoria<br>
                ‚Üí a veces sale m√°s barato porque ejecuta m√°s r√°pido.</p>

                <h2>6Ô∏è‚É£ El problema real: Concurrencia y base de datos</h2>

                <p>Lambda escala horizontalmente.</p>

                <p>Pero tu base de datos NO.</p>

                <p>Si no planificas:</p>

                <ul>
                    <li>Te quedas sin conexiones</li>
                    <li>Latencia se dispara</li>
                    <li>Ca√≠das en producci√≥n</li>
                </ul>

                <p><strong>Soluciones profesionales:</strong></p>

                <ul>
                    <li>‚úÖ RDS Proxy</li>
                    <li>‚úÖ SQS como buffer</li>
                    <li>‚úÖ Reserved concurrency</li>
                    <li>‚úÖ Rate limiting en API Gateway</li>
                </ul>

                <h2>7Ô∏è‚É£ Seguridad: Principio de Menor Privilegio</h2>

                <p><strong>Nunca hagas esto:</strong></p>

                <pre><code>{
  "Effect": "Allow",
  "Action": "*",
  "Resource": "*"
}</code></pre>

                <p><strong>Haz esto:</strong></p>

                <ul>
                    <li>1 rol por Lambda</li>
                    <li>Permisos m√≠nimos</li>
                    <li>Acceso solo a recursos necesarios</li>
                    <li>Secretos en Secrets Manager / SSM</li>
                </ul>

                <h2>8Ô∏è‚É£ Observabilidad (sin SSH no hay debugging manual)</h2>

                <p>En serverless no puedes entrar al servidor.</p>

                <p>Debes usar:</p>

                <ul>
                    <li>CloudWatch Logs</li>
                    <li>Logs estructurados (JSON)</li>
                    <li>M√©tricas</li>
                    <li>Tracing (X-Ray)</li>
                </ul>

                <p>Ejemplo de log estructurado:</p>

                <pre><code>console.log(JSON.stringify({
  level: "info",
  requestId: context.awsRequestId,
  message: "Processing request"
}));</code></pre>

                <h2>9Ô∏è‚É£ Event-Driven Architecture (donde Lambda brilla)</h2>

                <p>Lambda no solo se activa por HTTP.</p>

                <p>Puede activarse por:</p>

                <ul>
                    <li>S3 upload</li>
                    <li>SQS message</li>
                    <li>EventBridge</li>
                    <li>Cron job</li>
                    <li>DynamoDB stream</li>
                </ul>

                <p><strong>Ejemplo real:</strong></p>

                <pre><code>Usuario sube imagen a S3
     ‚Üì
Lambda se activa
     ‚Üì
Genera thumbnail
     ‚Üì
Guarda en otro bucket</code></pre>

                <p>Aqu√≠ Lambda es perfecta.</p>

                <h2>üîü Problemas reales de Serverless</h2>

                <h3>Cold Starts</h3>

                <p>Especialmente si:</p>

                <ul>
                    <li>Runtime pesado</li>
                    <li>VPC</li>
                    <li>Muchas dependencias</li>
                </ul>

                <h3>Fragmentaci√≥n de l√≥gica</h3>

                <p>Si haces 50 Lambdas peque√±as:</p>

                <ul>
                    <li>M√°s mantenimiento</li>
                    <li>M√°s complejidad</li>
                    <li>Debug distribuido</li>
                    <li>Muchos servicios = m√°s puntos de fallo</li>
                </ul>

                <h2>1Ô∏è‚É£1Ô∏è‚É£ Comparaci√≥n: Lambda vs EC2 / Contenedores</h2>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Aspecto</th>
                        <th>Lambda</th>
                        <th>EC2</th>
                    </tr>
                    <tr>
                        <td>Gesti√≥n</td>
                        <td>AWS</td>
                        <td>T√∫</td>
                    </tr>
                    <tr>
                        <td>Escalado</td>
                        <td>Autom√°tico</td>
                        <td>Configurable</td>
                    </tr>
                    <tr>
                        <td>Pago</td>
                        <td>Por uso</td>
                        <td>Por tiempo</td>
                    </tr>
                    <tr>
                        <td>Control</td>
                        <td>Limitado</td>
                        <td>Total</td>
                    </tr>
                    <tr>
                        <td>SSH</td>
                        <td>No</td>
                        <td>S√≠</td>
                    </tr>
                </table>

                <h2>1Ô∏è‚É£2Ô∏è‚É£ Ejercicios pr√°cticos (suben nivel real)</h2>

                <h3>Ejercicio 1 ‚Äî Health Endpoint</h3>

                <ul>
                    <li>GET /health</li>
                    <li>Devuelve requestId</li>
                    <li>Logs estructurados</li>
                </ul>

                <h3>Ejercicio 2 ‚Äî Evento S3</h3>

                <ul>
                    <li>Subir archivo</li>
                    <li>Lambda registra metadata</li>
                </ul>

                <h3>Ejercicio 3 ‚Äî Control de picos</h3>

                <ul>
                    <li>API ‚Üí SQS</li>
                    <li>Lambda consumer</li>
                    <li>DB write controlado</li>
                </ul>

                <h2>1Ô∏è‚É£3Ô∏è‚É£ Lo que un senior entiende y un junior a√∫n no</h2>

                <p>Serverless no es solo "subir c√≥digo".</p>

                <p>Es:</p>

                <ul>
                    <li>Modelo mental de eventos</li>
                    <li>Gesti√≥n de concurrencia</li>
                    <li>Control de recursos externos</li>
                    <li>Dise√±o stateless</li>
                    <li>Observabilidad obligatoria</li>
                    <li>Seguridad granular</li>
                </ul>

                <h2>1Ô∏è‚É£4Ô∏è‚É£ Regla de Arquitectura Profesional</h2>

                <p><strong>Lambda escala gratis.<br>
                Tu base de datos no.</strong></p>

                <p>Siempre dise√±a pensando en:</p>

                <ul>
                    <li>Backpressure</li>
                    <li>Retry</li>
                    <li>Idempotencia</li>
                    <li>Concurrencia</li>
                </ul>

                <h2>1Ô∏è‚É£5Ô∏è‚É£ Conclusi√≥n</h2>

                <p>Lambda es:</p>

                <ul>
                    <li>üî• Potente</li>
                    <li>üî• Escalable</li>
                    <li>üî• Barato al principio</li>
                    <li>üî• Ideal para eventos</li>
                </ul>

                <p><strong>Pero requiere mentalidad de arquitectura distribuida.</strong></p>

                <h2>üéØ Puntos Clave</h2>

                <ul>
                    <li>‚úî Serverless = sin gesti√≥n de servidores, no sin servidores</li>
                    <li>‚úî Perfecto para event-driven y tr√°fico irregular</li>
                    <li>‚úî La concurrencia de BD es el verdadero cuello de botella</li>
                    <li>‚úî RDS Proxy es esencial para producci√≥n</li>
                    <li>‚úî Observabilidad no es opcional</li>
                    <li>‚úî Seguridad: siempre menor privilegio</li>
                    <li>‚úî Dise√±a para fallos distribuidos</li>
                </ul>

                <h2>üìö Recursos</h2>

                <ul>
                    <li><a href="https://chatgpt.com/g/g-p-69925f6597e88191b8bcb93447c5bb78-dragos/c/6998625a-b788-838f-b485-dfad7524ba95" target="_blank">Serverless con AWS Lambda - Dragos</a></li>
                </ul>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="window.location.href='../index.html'">‚Üê Volver Atr√°s</button>
                    <button class="btn btn-primary" onclick="window.location.href='../../index.html'">Volver al Inicio ‚Üí</button>
                </div>
            </section>
        </main>
    </div>

    <script src="../../assets/js/app.js"></script>
</body>
</html>
