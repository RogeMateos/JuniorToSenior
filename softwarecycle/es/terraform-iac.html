<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure as Code con Terraform | Ciclo de Software</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <div class="container">
        <main class="main-content">
            <section id="section-terraform-iac">
                <h1>üåç 4.0 Infrastructure as Code con Terraform</h1>
                <p><strong>De "hacer clic en la consola" a "infraestructura profesional versionada"</strong></p>

                <h2>1Ô∏è‚É£ El problema real (por qu√© esto existe)</h2>

                <p>Imagina que trabajas en una empresa con:</p>

                <ul>
                    <li>40 microservicios</li>
                    <li>3 entornos (dev, staging, prod)</li>
                    <li>2 regiones</li>
                    <li>15 developers</li>
                </ul>

                <p>Si cada persona entra en AWS y hace:</p>

                <ul>
                    <li>Launch instance</li>
                    <li>Crear Security Group</li>
                    <li>Abrir puertos</li>
                    <li>Crear base de datos</li>
                    <li>Configurar red</li>
                </ul>

                <p>üëâ En 3 meses nadie sabe c√≥mo est√° montada la infraestructura.<br>
                üëâ En 6 meses tienes inconsistencias.<br>
                üëâ En 1 a√±o tienes un desastre.</p>

                <p><strong>Infraestructura manual no escala.</strong></p>

                <h2>2Ô∏è‚É£ La soluci√≥n: Infrastructure as Code (IaC)</h2>

                <p>Infrastructure as Code significa:</p>

                <p><strong>"Declarar la infraestructura en c√≥digo, versionarla con Git y dejar que una herramienta la cree y la mantenga."</strong></p>

                <p>En vez de:</p>

                <pre><code>Click ‚Üí click ‚Üí click</code></pre>

                <p>Haces:</p>

                <pre><code>resource "aws_instance" "app_server" {
  ami           = "ami-123456"
  instance_type = "t2.micro"
}</code></pre>

                <p>Y Terraform crea eso por ti.</p>

                <h2>3Ô∏è‚É£ Imperativo vs Declarativo (concepto clave)</h2>

                <h3>üî¥ Imperativo (scripts bash)</h3>

                <pre><code>create vpc
create subnet
create security group
create ec2</code></pre>

                <p>T√∫ defines paso a paso.</p>

                <h3>üü¢ Declarativo (Terraform)</h3>

                <pre><code>resource "aws_instance" "app" {
  ...
}</code></pre>

                <p>T√∫ solo dices:</p>

                <p><strong>"Este es el resultado final que quiero."</strong></p>

                <p>Terraform:</p>

                <ul>
                    <li>Calcula dependencias</li>
                    <li>Detecta diferencias</li>
                    <li>Ejecuta en el orden correcto</li>
                </ul>

                <p>Esto es <strong>idempotente</strong>:<br>
                Si ya existe, no lo recrea innecesariamente.</p>

                <h2>4Ô∏è‚É£ Qu√© es Terraform realmente</h2>

                <p>Terraform es:</p>

                <ul>
                    <li>Un motor de comparaci√≥n</li>
                    <li>Un gestor de estado</li>
                    <li>Un ejecutor de cambios</li>
                </ul>

                <p>Hace esto:</p>

                <ul>
                    <li>Lee tus archivos .tf</li>
                    <li>Lee el estado actual del cloud</li>
                    <li>Calcula diferencias</li>
                    <li>Te muestra un plan</li>
                    <li>Aplica cambios</li>
                </ul>

                <h2>5Ô∏è‚É£ El concepto M√ÅS importante: el STATE</h2>

                <p>Terraform guarda un archivo llamado state.</p>

                <p>Ese archivo contiene:</p>

                <ul>
                    <li>Qu√© recursos cre√≥</li>
                    <li>Sus IDs reales en AWS</li>
                    <li>Sus relaciones</li>
                </ul>

                <p>Sin state, Terraform no sabe qu√© existe.</p>

                <h3>üö® Problema real en empresas</h3>

                <p>Si dos personas hacen terraform apply al mismo tiempo:</p>

                <p>üëâ Puedes romper producci√≥n.</p>

                <p>Por eso en empresas usamos:</p>

                <ul>
                    <li>Remote State</li>
                </ul>

                <p>Ejemplo t√≠pico en AWS:</p>

                <ul>
                    <li>State guardado en S3</li>
                    <li>Locking con DynamoDB</li>
                </ul>

                <p>Esto evita:</p>

                <ul>
                    <li>Corrupci√≥n del state</li>
                    <li>Cambios simult√°neos</li>
                </ul>

                <h2>6Ô∏è‚É£ Flujo profesional real (no desde tu port√°til)</h2>

                <p>En empresa NO se hace:</p>

                <pre><code>terraform apply en local</code></pre>

                <p>Se hace:</p>

                <ul>
                    <li>Dev crea branch</li>
                    <li>Hace cambios en .tf</li>
                    <li>PR dispara pipeline</li>
                    <li>Pipeline ejecuta:
                        <ul>
                            <li>terraform fmt</li>
                            <li>terraform validate</li>
                            <li>terraform plan</li>
                        </ul>
                    </li>
                    <li>Se revisa el plan</li>
                    <li>Merge a main</li>
                    <li>Pipeline hace terraform apply</li>
                </ul>

                <p>üëâ Infraestructura como c√≥digo revisada por PR<br>
                üëâ Auditor√≠a<br>
                üëâ Seguridad</p>

                <h2>7Ô∏è‚É£ Estructura b√°sica de un proyecto Terraform</h2>

                <pre><code>/terraform
  ‚îú‚îÄ‚îÄ main.tf
  ‚îú‚îÄ‚îÄ variables.tf
  ‚îú‚îÄ‚îÄ outputs.tf
  ‚îú‚îÄ‚îÄ providers.tf
  ‚îú‚îÄ‚îÄ terraform.tfvars</code></pre>

                <h2>8Ô∏è‚É£ Ejemplo pr√°ctico m√≠nimo (Security Group)</h2>

                <h3>providers.tf</h3>

                <pre><code>terraform {
  required_version = ">= 1.5.0"

  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = var.aws_region
}</code></pre>

                <h3>variables.tf</h3>

                <pre><code>variable "aws_region" {
  type = string
}

variable "app_port" {
  type    = number
  default = 3000
}</code></pre>

                <h3>main.tf</h3>

                <pre><code>resource "aws_security_group" "app_sg" {
  name = "app-security-group"

  ingress {
    from_port   = var.app_port
    to_port     = var.app_port
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
}</code></pre>

                <h3>outputs.tf</h3>

                <pre><code>output "security_group_id" {
  value = aws_security_group.app_sg.id
}</code></pre>

                <h2>9Ô∏è‚É£ Comandos b√°sicos</h2>

                <pre><code>terraform init
terraform fmt
terraform validate
terraform plan
terraform apply
terraform destroy</code></pre>

                <h3>Qu√© hace cada uno</h3>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Comando</th>
                        <th>Qu√© hace</th>
                    </tr>
                    <tr>
                        <td>init</td>
                        <td>Descarga providers</td>
                    </tr>
                    <tr>
                        <td>fmt</td>
                        <td>Formatea c√≥digo</td>
                    </tr>
                    <tr>
                        <td>validate</td>
                        <td>Valida sintaxis</td>
                    </tr>
                    <tr>
                        <td>plan</td>
                        <td>Muestra cambios</td>
                    </tr>
                    <tr>
                        <td>apply</td>
                        <td>Aplica cambios</td>
                    </tr>
                    <tr>
                        <td>destroy</td>
                        <td>Elimina todo</td>
                    </tr>
                </table>

                <h2>üîü Variables y entornos</h2>

                <p>En empresa nunca hardcodeamos valores.</p>

                <p>Ejemplo:</p>

                <pre><code>environments/
   dev/
   staging/
   prod/</code></pre>

                <p>Cada entorno tiene:</p>

                <ul>
                    <li>State separado</li>
                    <li>Variables distintas</li>
                    <li>Cuenta distinta idealmente</li>
                </ul>

                <h2>1Ô∏è‚É£1Ô∏è‚É£ Seguridad (muy importante)</h2>

                <p><strong>‚ùå Nunca:</strong></p>

                <ul>
                    <li>Hardcodear passwords</li>
                    <li>Subir secrets a Git</li>
                </ul>

                <p><strong>‚úî Usar:</strong></p>

                <ul>
                    <li>AWS Secrets Manager</li>
                    <li>Variables de entorno en CI</li>
                    <li>Roles IAM con permisos m√≠nimos</li>
                </ul>

                <h2>1Ô∏è‚É£2Ô∏è‚É£ Terraform vs CloudFormation vs CDK</h2>

                <table class="cheat-sheet-table">
                    <tr>
                        <th>Herramienta</th>
                        <th>Uso t√≠pico</th>
                    </tr>
                    <tr>
                        <td>Terraform</td>
                        <td>Multi-cloud</td>
                    </tr>
                    <tr>
                        <td>CloudFormation</td>
                        <td>AWS puro</td>
                    </tr>
                    <tr>
                        <td>CDK</td>
                        <td>Infra con TypeScript</td>
                    </tr>
                    <tr>
                        <td>CDKTF</td>
                        <td>Terraform + c√≥digo</td>
                    </tr>
                </table>

                <p>üëâ Aprende Terraform primero.<br>
                üëâ Luego CDK si trabajas 100% AWS.</p>

                <h2>1Ô∏è‚É£3Ô∏è‚É£ Conceptos avanzados que debes conocer</h2>

                <h3>Drift</h3>

                <p>Si alguien cambia algo manualmente en AWS:</p>

                <p>Terraform lo detecta en el siguiente plan.</p>

                <h3>Import</h3>

                <p>Si ya existe infraestructura:</p>

                <pre><code>terraform import</code></pre>

                <p>La traes al state.</p>

                <h3>M√≥dulos</h3>

                <p>Cuando tienes patrones repetidos:</p>

                <ul>
                    <li>M√≥dulo de EC2</li>
                    <li>M√≥dulo de RDS</li>
                    <li>M√≥dulo de VPC</li>
                </ul>

                <p>As√≠ no duplicas c√≥digo.</p>

                <h2>1Ô∏è‚É£4Ô∏è‚É£ ¬øCu√°ndo usar Terraform y cu√°ndo no?</h2>

                <h3>‚úÖ Ideal para:</h3>

                <ul>
                    <li>Empresas medianas/grandes</li>
                    <li>Multi-entorno</li>
                    <li>Multi-cloud</li>
                    <li>Infra cr√≠tica</li>
                </ul>

                <h3>‚ùå Overkill para:</h3>

                <ul>
                    <li>Startup de 2 personas</li>
                    <li>1 servidor peque√±o</li>
                    <li>Proyecto temporal</li>
                </ul>

                <h2>1Ô∏è‚É£5Ô∏è‚É£ Mental Model Final</h2>

                <p>Terraform es:</p>

                <p><strong>"Git para tu infraestructura."</strong></p>

                <p>Puedes:</p>

                <ul>
                    <li>Ver cambios</li>
                    <li>Revertir</li>
                    <li>Reproducir infraestructura</li>
                    <li>Auditar todo</li>
                </ul>

                <h2>1Ô∏è‚É£6Ô∏è‚É£ Si sabes esto como Full Stack</h2>

                <p>Y adem√°s sabes:</p>

                <ul>
                    <li>CI/CD</li>
                    <li>Docker</li>
                    <li>Cloud</li>
                    <li>Networking b√°sico</li>
                    <li>Seguridad b√°sica</li>
                </ul>

                <p><strong>Ya no eres solo desarrollador.</strong></p>

                <p>Eres un ingeniero de producto completo.</p>

                <h2>üéØ Puntos Clave</h2>

                <ul>
                    <li>‚úî IaC previene caos de infraestructura manual</li>
                    <li>‚úî Terraform es declarativo, no imperativo</li>
                    <li>‚úî El state es todo (prot√©gelo)</li>
                    <li>‚úî Siempre usa remote state en producci√≥n</li>
                    <li>‚úî Locking con DynamoDB previene conflictos</li>
                    <li>‚úî Usa Git workflows para cambios de infraestructura</li>
                    <li>‚úî Nunca hardcodees secrets</li>
                    <li>‚úî Modules previene duplicaci√≥n de c√≥digo</li>
                    <li>‚úî Idempotencia es clave</li>
                    <li>‚úî terraform plan antes de terraform apply</li>
                </ul>

                <h2>üìö Recursos</h2>

                <ul>
                    <li><a href="https://chatgpt.com/g/g-p-69925f6597e88191b8bcb93447c5bb78-dragos/c/699865c5-0d04-838c-bfc3-891c218e842e" target="_blank">Infrastructure as Code con Terraform - Dragos</a></li>
                </ul>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="window.location.href='../index.html'">‚Üê Volver Atr√°s</button>
                    <button class="btn btn-primary" onclick="window.location.href='../../index.html'">Volver al Inicio ‚Üí</button>
                </div>
            </section>
        </main>
    </div>

    <script src="../../assets/js/app.js"></script>
</body>
</html>
