<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Pipeline de Build | Ciclo de Software</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <div class="container">
        <main class="main-content">
            <section id="section-build-pipeline">
                <h1>ğŸ’¿ El Pipeline de Build</h1>
                <p><strong>GuÃ­a Completa de Sistemas CI/CD de Build</strong></p>

                <h2>ğŸ¯ Objetivo</h2>

                <p>Entender quÃ© es el Build Pipeline, cÃ³mo funciona, por quÃ© es crÃ­tico en CI/CD y cÃ³mo implementarlo correctamente en distintos tipos de aplicaciones (SPA, Node API, Docker).</p>

                <p>Lo veremos como lo harÃ­a un desarrollador senior guiando a un junior.</p>

                <h2>1ï¸âƒ£ Mental Model: Â¿QuÃ© es el Build Pipeline?</h2>

                <p>En un pipeline moderno distinguimos tres conceptos:</p>

                <p><strong>Code â†’ Build â†’ Artifact â†’ Release/Deploy â†’ Runtime</strong></p>

                <p><strong>ğŸ”¹ Build Pipeline</strong></p>

                <p>Es el proceso automatizado que:</p>

                <ul>
                    <li>Instala dependencias</li>
                    <li>Valida el cÃ³digo</li>
                    <li>Ejecuta tests</li>
                    <li>Compila / transpila</li>
                    <li>Empaqueta</li>
                    <li>Produce un artefacto reproducible</li>
                </ul>

                <p><strong>ğŸ”¹ Artefacto</strong></p>

                <p>Es el resultado ejecutable del build.</p>

                <p>Debe cumplir una regla clave:</p>

                <p>ğŸ” <strong>El artefacto debe poder desplegarse sin volver a compilar.</strong></p>

                <p>Si necesitas reconstruir en producciÃ³n, tu diseÃ±o estÃ¡ mal.</p>

                <h2>2ï¸âƒ£ Â¿Por quÃ© separar Build y Deploy?</h2>

                <p>Muchos sistemas ejecutan build + deploy juntos.<br>
                Pero mentalmente debemos separarlos.</p>

                <p>ğŸš€ <strong>Ventaja principal: Rollback rÃ¡pido</strong></p>

                <p>Si hay un error en producciÃ³n:</p>

                <p><strong>âŒ Sin separaciÃ³n:</strong></p>

                <ul>
                    <li>Ejecutas build otra vez</li>
                    <li>Puede que dependencias hayan cambiado</li>
                    <li>El resultado no es idÃ©ntico</li>
                </ul>

                <p><strong>âœ… Con separaciÃ³n:</strong></p>

                <ul>
                    <li>Tomas artefacto anterior</li>
                    <li>Lo redeployas</li>
                    <li>En segundos vuelves atrÃ¡s</li>
                </ul>

                <p><strong>Eso es madurez DevOps.</strong></p>

                <h2>3ï¸âƒ£ Eventos que disparan el Build</h2>

                <p>No todos los builds son iguales.</p>

                <p><strong>ğŸ”¹ Pull Request</strong></p>

                <p>Objetivo: Validar calidad<br>
                No genera artefacto oficial.</p>

                <p><strong>ğŸ”¹ Merge a main</strong></p>

                <p>Objetivo: Crear artefacto oficial<br>
                Se publica en artifact repository.</p>

                <p>Esto separa:</p>

                <ul>
                    <li>ValidaciÃ³n</li>
                    <li>FabricaciÃ³n oficial</li>
                </ul>

                <h2>4ï¸âƒ£ Estructura General de un Build Pipeline</h2>

                <p>Un build profesional tiene estas fases:</p>

                <h3>Paso 1 â€” Preparar entorno</h3>

                <ul>
                    <li>Seleccionar versiÃ³n de runtime (Node 20, etc.)</li>
                    <li>Restaurar cachÃ©</li>
                    <li>Instalar dependencias de forma reproducible</li>
                </ul>

                <p><strong>âš ï¸ Nunca uses:</strong></p>

                <pre><code>npm install</code></pre>

                <p><strong>âœ… Usa:</strong></p>

                <pre><code>npm ci</code></pre>

                <p>Porque usa el lockfile y garantiza reproducibilidad.</p>

                <h3>Paso 2 â€” Quality Gates (fallar rÃ¡pido)</h3>

                <p>AquÃ­ validamos antes de compilar.</p>

                <ul>
                    <li>Lint</li>
                    <li>Type check</li>
                    <li>Unit tests</li>
                    <li>Security scan</li>
                </ul>

                <p>Estos pasos pueden correr en paralelo.</p>

                <h3>Paso 3 â€” Build / Package</h3>

                <p>AquÃ­ transformamos el cÃ³digo en algo ejecutable.</p>

                <p>Depende del tipo de aplicaciÃ³n.</p>

                <h2>5ï¸âƒ£ Artefactos segÃºn el tipo de aplicaciÃ³n</h2>

                <h3>ğŸŸ¦ Caso 1 â€” SPA (React, Vue, etc.)</h3>

                <p><strong>Flujo tÃ­pico:</strong></p>

                <pre><code>npm ci
npm run lint
npm run typecheck
npm test
npm run build</code></pre>

                <p><strong>Â¿QuÃ© hace el build?</strong></p>

                <ul>
                    <li>Transpila TypeScript â†’ JavaScript</li>
                    <li>Bundlea mÃ³dulos</li>
                    <li>Optimiza assets</li>
                    <li>Genera carpeta /dist</li>
                </ul>

                <p><strong>ğŸ Artefacto:</strong></p>

                <pre><code>dist/
  index.html
  assets/
  bundle.js
  styles.css</code></pre>

                <p>Ese directorio se sube a:</p>

                <ul>
                    <li>S3</li>
                    <li>Static hosting</li>
                    <li>CDN</li>
                    <li>Artifact repository</li>
                </ul>

                <h3>ğŸŸ© Caso 2 â€” Node API</h3>

                <p><strong>Flujo tÃ­pico:</strong></p>

                <pre><code>npm ci
npm run lint
npm test
npm run build</code></pre>

                <p><strong>Resultado:</strong></p>

                <pre><code>dist/
  server.js
  routes/
  services/</code></pre>

                <p><strong>ğŸ Artefacto:</strong></p>

                <ul>
                    <li>Carpeta /dist</li>
                    <li>package.json</li>
                    <li>lockfile</li>
                    <li>Opcional: node_modules si empaquetas completo</li>
                </ul>

                <h3>ğŸŸ§ Caso 3 â€” AplicaciÃ³n Dockerizada</h3>

                <p>AquÃ­ el artefacto es diferente.</p>

                <p><strong>Flujo:</strong></p>

                <pre><code>docker build -t myapp:1.0.0 .
docker push registry/myapp:1.0.0</code></pre>

                <p><strong>ğŸ Artefacto:</strong></p>

                <p>Una imagen Docker versionada.</p>

                <p><strong>Ventaja enorme:</strong></p>

                <ul>
                    <li>Entorno idÃ©ntico en todos lados</li>
                    <li>Cero diferencias entre staging y prod</li>
                </ul>

                <h2>6ï¸âƒ£ Versionado y Trazabilidad</h2>

                <p>Un senior nunca publica artefactos sin versionar.</p>

                <p><strong>Buenas prÃ¡cticas:</strong></p>

                <ul>
                    <li>Semver: 1.8.3</li>
                    <li>Commit SHA: myapp:1.8.3-abc123</li>
                    <li>Guardar metadata:
                        <ul>
                            <li>commit</li>
                            <li>fecha</li>
                            <li>pipeline id</li>
                        </ul>
                    </li>
                </ul>

                <p><strong>Pregunta clave que siempre debes poder responder:</strong></p>

                <p><strong>Â¿QuÃ© commit estÃ¡ corriendo en producciÃ³n?</strong></p>

                <h2>7ï¸âƒ£ Seguridad en el Build</h2>

                <p>Hoy el build no es solo compilar.</p>

                <p>Debe incluir:</p>

                <p><strong>ğŸ” SCA (dependency scan)</strong></p>

                <ul>
                    <li>npm audit</li>
                    <li>Snyk</li>
                    <li>Dependabot</li>
                </ul>

                <p><strong>ğŸ” Secret scanning</strong></p>

                <p>Evitar subir tokens por error.</p>

                <p><strong>ğŸ§  SAST</strong></p>

                <p>AnÃ¡lisis estÃ¡tico de cÃ³digo.</p>

                <p>En empresas grandes esto es obligatorio.</p>

                <h2>8ï¸âƒ£ OptimizaciÃ³n del Pipeline</h2>

                <p>Si el build tarda 20 minutos, nadie lo usarÃ¡.</p>

                <p><strong>Buenas prÃ¡cticas:</strong></p>

                <p><strong>âš¡ Caching</strong></p>

                <p>Cachear node_modules</p>

                <p><strong>âš¡ ParalelizaciÃ³n</strong></p>

                <p>Lint + tests + typecheck en paralelo</p>

                <p><strong>âš¡ Monorepo</strong></p>

                <p>Build solo lo que cambiÃ³ (Nx, Turborepo)</p>

                <h2>9ï¸âƒ£ Ejemplo Real â€” GitHub Actions (SPA)</h2>

                <pre><code>name: build-spa

on:
  pull_request:
  push:
    branches: [main]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm

      - run: npm ci
      - run: npm run lint
      - run: npm run typecheck --if-present
      - run: npm test

  build:
    if: github.ref == 'refs/heads/main'
    needs: quality
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm

      - run: npm ci
      - run: npm run build

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: spa-dist-${{ github.sha }}
          path: dist</code></pre>

                <p>Esto implementa exactamente la separaciÃ³n mental:</p>

                <ul>
                    <li>PR â†’ calidad</li>
                    <li>main â†’ artefacto oficial</li>
                </ul>

                <h2>ğŸ”Ÿ Checklist Profesional de Build Pipeline</h2>

                <p>Si eres senior, tu build debe cumplir:</p>

                <ul>
                    <li>âœ… Reproducible</li>
                    <li>âœ… Versionado</li>
                    <li>âœ… Trazable</li>
                    <li>âœ… Seguro</li>
                    <li>âœ… Cacheado</li>
                    <li>âœ… Paralelizado</li>
                    <li>âœ… Separado del deploy</li>
                    <li>âœ… Capaz de rollback inmediato</li>
                </ul>

                <h2>ğŸ§  Resumen Final</h2>

                <p><strong>El Build Pipeline no es simplemente:</strong></p>

                <p>"correr npm run build"</p>

                <p><strong>Es un sistema automatizado que:</strong></p>

                <ul>
                    <li>Garantiza calidad</li>
                    <li>Produce artefactos reproducibles</li>
                    <li>Permite rollback rÃ¡pido</li>
                    <li>AÃ±ade seguridad</li>
                    <li>Escala con el equipo</li>
                    <li>Es transferible a cualquier lenguaje</li>
                </ul>

                <p><strong>Una vez entiendes este patrÃ³n, puedes hacer CI/CD para:</strong></p>

                <ul>
                    <li>React</li>
                    <li>Node</li>
                    <li>Java</li>
                    <li>.NET</li>
                    <li>Python</li>
                    <li>Docker</li>
                    <li>Kubernetes</li>
                </ul>

                <p><strong>El lenguaje cambia.<br>
                La estructura mental no.</strong></p>

                <h2>ğŸ“š Recursos</h2>

                <ul>
                    <li><a href="https://chatgpt.com/g/g-p-69925f6597e88191b8bcb93447c5bb78-dragos/c/69965325-3eb4-8396-9363-87897df941c1" target="_blank">El Build Pipeline â€” GuÃ­a Completa de CI/CD - Dragos</a></li>
                </ul>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="window.location.href='../index.html'">â† Volver AtrÃ¡s</button>
                    <button class="btn btn-primary" onclick="window.location.href='../../index.html'">Volver al Inicio â†’</button>
                </div>
            </section>
        </main>
    </div>

    <script src="../../assets/js/app.js"></script>
</body>
</html>
